CREATE DATABASE metabase;
\c postgres;
CREATE USER metabase with password 'metabase';
CREATE TABLE ouradata(
	id serial PRIMARY KEY NOT NULL,
    date DATE,
    Sleep_Score integer,
    Total_Sleep_Score integer,
    REM_Sleep_Score integer,
    Deep_Sleep_Score integer,
    Sleep_Efficiency_Score integer,
    Sleep_Tranquility_Score integer,
    Sleep_Latency_Score integer,
    Sleep_Timing_Score integer,
    Total_Bedtime integer,
    Total_Sleep_Time integer,
    Awake_Time integer,
    REM_Sleep_Time integer,
    Light_Sleep_Time integer,
    Deep_Sleep_Time integer,
    Restless_Sleep integer,
    Sleep_Efficiency integer,
    Sleep_Latency integer,
    Sleep_Timing integer,
    Sleep_Timing_empty integer,
    Bedtime_Start TimeSTAMP,
    Bedtime_End TimeSTAMP,
    Average_Resting_Heart_Rate NUMERIC,
    Lowest_Resting_Heart_Rate integer,
    Average_HRV integer,
    Temperature_Deviation NUMERIC,
    Respiratory_Rate NUMERIC,
    Activity_Score integer,
    Stay_Active_Score integer,
    Move_Every_Hour_Score integer,
    Meet_Daily_Targets_Score integer,
    Training_Frequency_Score integer,
    Training_Volume_Score integer,
    Recovery_Time_Score integer,
    Activity_Burn integer,
    Total_Burn integer,
    Target_Calories integer,
    Steps integer,
    Daily_Movement integer,
    Inactive_Time integer,
    Rest_Time integer,
    Low_Activity_Time integer,
    Medium_Activity_Time integer,
    High_Activity_Time integer,
    Non_wear_Time integer,
    Average_MET NUMERIC,
    Long_Periods_of_Inactivity integer,
    Readiness_Score integer,
    Previous_Night_Score integer,
    Sleep_Balance_Score integer,
    Previous_Day_Activity_Score integer,
    Activity_Balance_Score integer,
    Temperature_Score integer,
    Resting_Heart_Rate_Score integer,
    HRV_Balance_Score integer,
    Recovery_Index_Score integer
);
COPY ouradata(date,Sleep_Score,Total_Sleep_Score,REM_Sleep_Score,Deep_Sleep_Score,Sleep_Efficiency_Score,Sleep_Tranquility_Score,Sleep_Latency_Score,Sleep_Timing_Score,Total_Bedtime,Total_Sleep_Time,Awake_Time,REM_Sleep_Time,Light_Sleep_Time,Deep_Sleep_Time,Restless_Sleep,Sleep_Efficiency,Sleep_Latency,Sleep_Timing,Sleep_Timing_empty,Bedtime_Start,Bedtime_End,Average_Resting_Heart_Rate,Lowest_Resting_Heart_Rate,Average_HRV,Temperature_Deviation,Respiratory_Rate,Activity_Score,Stay_Active_Score,Move_Every_Hour_Score,Meet_Daily_Targets_Score,Training_Frequency_Score,Training_Volume_Score,Recovery_Time_Score,Activity_Burn,Total_Burn,Target_Calories,Steps,Daily_Movement,Inactive_Time,Rest_Time,Low_Activity_Time,Medium_Activity_Time,High_Activity_Time,Non_wear_Time,Average_MET,Long_Periods_of_Inactivity,Readiness_Score,Previous_Night_Score,Sleep_Balance_Score,Previous_Day_Activity_Score,Activity_Balance_Score,Temperature_Score,Resting_Heart_Rate_Score,HRV_Balance_Score,Recovery_Index_Score) 
FROM '/tmp/oura_data.csv' DELIMITER ',' CSV HEADER;
GRANT ALL PRIVILEGES ON TABLE ouradata TO metabase;
